The main files are main, tree, branch and leaf.

It is better to run the code (main.m) by blocks. 

The first block generates leaves placed randomly in the space, within the limits specified (lines 41-43). It also creates an empty tree object.

The second block applies the Space Colonization Algorithm to grow a complete synthetic tree.

The third block just saves the generated object (in Matlab type) for later usage.

The fourth block samples the generated structure, generates a pointcloud and also an stl using the alpha shape algorithm.

The fifht block does the dynamic simulation. Here the important lines are 
	- 95: Specify where to apply the external force or wrench.
	- 100 & 102: Define the values of the external wrench and forces (in global coordinates).

To have a reference for the branch id, look at the plot generated by running the block 2 (blue tree structure and black joints). It provides a custom datatip fcn to include the id of each branch.

Warning: Branch index and branch id are different variables due to the topological connection algorithm.


Line 10 in main.m contains an absolute path that is useful only when building the SDF, URDF or MUJOCO XML of the generated model. Having it or not does not affect the creation of the tree object.
If you plan to later generate such files, this path has to point to the location of the build_sdf folder.


Lines 13 and 14 contain the name of the skeletonized point cloud generated with the Laplace Based Contraction algorithm. Sample files named mega_cloud_lab_new_2.mat and mega_cloud_lab_complex_no_holes_4.mat are provided for testing. Line 15 points to the path of these files.


To generate URDF files:
	Check the create_gazebo_world.m file
		- Line 3 points to the template that serves for filling the world file. It must be point to ${PATH_TO_BUILD_SDF}/sdf/sdf/template_world_gazebo_v1.txt
		- Line 66 points to the output directory. Any system path works here.

	For running:

 	- Run the fisrt two blocks in main.m
	- In the Matlab workspace: create_gazebo_world(a, 'TEST_FILENAME'), where a is the variable of the tree_obj
	- A new world file appears in the location specified in line 66.
